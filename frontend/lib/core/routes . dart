import '../features/ads/presentation/screens/create_ad_screen.dart';
import '../features/shop/presentation/screens/create_shop_screen.dart';
import '../features/shop/presentation/screens/shop_dashboard_screen.dart';
import '../features/shop/presentation/screens/shop_products_screen.dart';
import '../features/shop/presentation/screens/shop_preview_screen.dart';
// مدیریت مسیرهای برنامه
import 'package:go_router/go_router.dart';
import '../features/auth/presentation/screens/login_screen.dart';
import '../features/auth/presentation/screens/verify_screen.dart';
import '../features/home/presentation/screens/home_screen.dart';

class AppRoutes {
  static const String splash = '/';
  static const String login = '/login';
  static const String verify = '/verify';
  static const String home = '/home';
  static const String profile = '/profile';
  static const String createAd = '/ads/create';
  static const String search = '/search';
  static const String chat = '/chat';
  static const String shop = '/shop';
  
  // روتر اصلی
  static GoRouter get router {
    return GoRouter(
      initialLocation: splash,
      routes: [
        // صفحه splash (موقت)
        GoRoute(
          path: splash,
          builder: (context, state) => const LoginScreen(), // فعلا مستقیم به لاگین می‌رود
        ),
        
        // صفحه لاگین
        GoRoute(
          path: login,
          builder: (context, state) => const LoginScreen(),
        ),
        
        // صفحه تأیید کد
        GoRoute(
          path: verify,
          builder: (context, state) {
            final phone = state.uri.queryParameters['phone'] ?? '';
            return VerifyScreen(phoneNumber: phone);
          },
        ),
        
        // صفحه اصلی با تب‌ها
        GoRoute(
          path: home,
          builder: (context, state) => const HomeScreen(),
        ),
        
        // صفحه پروفایل
        GoRoute(
          path: profile,
          builder: (context, state) => const Scaffold(
            body: Center(child: Text('صفحه پروفایل')),
          ),
        ),
      ],
    );
  }
  
  // تابع کمکی برای ناوبری
  static void goToLogin(BuildContext context) => context.go(login);
  static void goToVerify(BuildContext context, String phone) => 
      context.go('$verify?phone=$phone');
  static void goToHome(BuildContext context) => context.go(home);
  static void goToProfile(BuildContext context) => context.go(profile);
}
// بعد از routeهای موجود، این‌ها را اضافه کن:
// صفحه ثبت آگهی
GoRoute(
  path: '/ads/create',
  builder: (context, state) => const CreateAdScreen(),
),

// صفحه ایجاد فروشگاه
GoRoute(
  path: '/shop/create',
  builder: (context, state) => const CreateShopScreen(),
),

// داشبورد فروشگاه
GoRoute(
  path: '/shop/dashboard',
  builder: (context, state) => const ShopDashboardScreen(),
),

// محصولات فروشگاه
GoRoute(
  path: '/shop/products',
  builder: (context, state) => const ShopProductsScreen(),
),

// پیش‌نمایش فروشگاه
GoRoute(
  path: '/shop/:id',
  builder: (context, state) {
    final shopId = state.pathParameters['id'] ?? '';
    return ShopPreviewScreen(shopId: shopId);
  },
),
